!function(n){n.module("angularNotificationsManager.config",[]).value("angularNotificationsManager.config",{debug:!0}),n.module("angularNotificationsManager.services",[]),n.module("angularNotificationsManager",["angularNotificationsManager.config","angularNotificationsManager.services","angularSocketIO"])}(angular),function(n){n.module("angularSocketIO.services",[]),n.module("angularSocketIO",["angularSocketIO.services"])}(angular),function(n){function t(){function n(n){return n.get(t)}var t="SocketIO";this.setService=function(n){t=n},this.$get=n,n.$inject=["$injector"]}n.module("angularNotificationsManager.services").provider("MessageChannel",t)}(angular),function(n){function t(){function t(){for(var n=["baseUrl","viewUrl"],t=0;t<n.length;t++)if(!i[n[t]])throw new Error("NotificationsManagerProvider:configuration, the field "+n[t]+" is required")}function e(e,o,a){function c(n,t,e){var r=i.prefix?i.prefix+i.separator:"";r+=n,t&&(r+=i.separator+t),a.on(r,function(n){e(n)})}function u(n,t){if(t){if(!i.identifier)return o.info("NotificationsManager:view, unable to find the identifier "+i.identifier+" from the notification model");e.get("$http").put(i.viewUrl,{id:n[i.identifier]})}}function f(t,e,i){if(!e&&n.isArray(t)){for(var r=0;r<t.length;r++)i(t[r]);return!1}return i(t)}function s(n,t){for(var e in t)t.hasOwnProperty(e)&&(n[e]||(n[e]=t[e]));return n}function l(n){for(var t in n)if(n.hasOwnProperty(t))return!1;return!0}function g(n,t,r,o,a){var c=a?{action:a}:{};s(c,n),n&&e.get("$http").get(i.baseUrl+"/"+o,{params:c}).then(function(n){v(n.data,o,a,r,t)})}function v(n,t,e,i,r){if(l(i))return r(n);for(var o=0;o<N.length;o++)N[o].function(n,i[N[o].name],r,t,e)}function p(n,t,e,i){if(l(e))return!1;for(var r=0;r<M.length;r++)M[r].function(e[M[r].name],i,e,n,t)}function h(n,t,e,i){var r=function(){p(n,t,e,i),c(n,t,function(e){var i=d(n,t);if(!i)return!1;for(var r=0;r<i.listeners.length;r++)v(e,n,t,i.listeners[r].options,i.listeners[r].callback)})};a.isConnected()?r():a.on("connect",function(){r()})}function d(n,t){for(var e=0;e<r.length;e++){if(r[e].type===n&&!t&&!r[e].action)return r[e];if(r[e].type===n&&t&&r[e].action===t)return r[e]}return void 0}function m(n,t,e,i){var o=d(n,t);o?o.listeners.push({callback:i,options:e}):(r.push({type:n,action:t,listeners:[{callback:i,options:e}]}),h(n,t,e,i))}function k(n,e,i,r){t(),m(n,e,i,r)}var N=[{name:"grouped","function":f},{name:"viewed","function":u}],M=[{name:"fetchOnInit","function":g}];return{on:k,view:function(n){u(n,!0)},refresh:function(){for(var n=0;n<r.length;n++)for(var t=0;t<r[n].listeners.length;t++)h(r[n].type,r[n].action,r[n].listeners[t].options,r[n].listeners[t].callback)}}}var i={identifier:"_id",separator:":"},r=[];this.setBaseUrl=function(n){n&&(i.baseUrl=n)},this.setViewUrl=function(n){n&&(i.viewUrl=n)},this.setPrefix=function(n){n&&(i.prefix=n)},this.setSeparator=function(n){n&&(i.separator=n)},this.setIdentifier=function(n){n&&(i.identifier=n)},this.$get=e,e.$inject=["$injector","$log","MessageChannel"]}n.module("angularNotificationsManager.services").provider("NotificationsManager",t)}(angular),function(n){function t(n){function t(t,e){r&&r.on?r.on(t,function(){var t=arguments;n.$apply(function(){e.apply(r,t)})}):o.push({eventName:t,callback:e})}function e(){for(var n=0;n<o.length;n++)"connect"===o[n].eventName?o[n].callback():t(o[n].eventName,o[n].callback);o=[]}function i(n,t){r=io.connect(n,t),e()}var r=null,o=[];return{connect:i,disconnect:function(){r=null,o=[]},on:t,get:function(){return r},isConnected:function(){return!!r},emit:function(t,e,i){r.emit(t,e,function(){var t=arguments;n.$apply(function(){i&&i.apply(r,t)})})}}}n.module("angularSocketIO.services").service("SocketIO",t),t.$inject=["$rootScope"]}(angular);